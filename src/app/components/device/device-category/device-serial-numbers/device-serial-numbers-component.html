<div class="row">
  <p class="col-sm-12">
    <button class="btn btn-primary"
            has-role="['admin', 'salesAdmin']"
            ng-click="vm.openCreateModal({})">Create
    </button>
  </p>
  <div class="col-md-12">
    <div class="row">
      <div class="col-xs-12 col-md-push-9 col-md-3 sm-spacer">
        <form novalidate ng-submit="vm.loadSales()">
          <div class="form-group">
            <label for="salesOrder">Sales Order</label>
            <input class="form-control"
                   type="text"
                   id="salesOrder"
                   ng-model-options="vm.modelOptions"
                   ng-model="vm.searchFilters.salesOrder">
          </div>

          <div class="form-group">
            <label for="dateFrom">Date From:</label>
            <p class="input-group">
              <input type="text"
                     id="dateFrom"
                     class="form-control"
                     uib-datepicker-popup="dd.MM.yyyy"
                     ng-model="vm.searchFilters.dateFrom"
                     popup-placement="auto"
                     is-open="openFrom"
                     datepicker-options="{maxDate: vm.searchFilters.dateTo}"
                     required
                     close-text="Close"  />
              <span class="input-group-btn">
            <button type="button"
                    class="btn btn-default"
                    ng-click="openFrom = !openFrom">
              <i class="glyphicon glyphicon-calendar"></i></button>
          </span>
            </p>
          </div>

          <div class="form-group">
            <label for="dateTo">Date To:</label>
            <p class="input-group">
              <input type="text"
                     id="dateTo"
                     class="form-control"
                     uib-datepicker-popup="dd.MM.yyyy"
                     ng-model="vm.searchFilters.dateTo"
                     datepicker-options="{minDate: vm.searchFilters.dateFrom}"
                     popup-placement="auto"
                     is-open="openTo"
                     required
                     close-text="Close"  />
              <span class="input-group-btn">
            <button type="button"
                    class="btn btn-default"
                    ng-click="openTo = !openTo">
              <i class="glyphicon glyphicon-calendar"></i></button>
          </span>
            </p>
          </div>

          <div class="form-group">
            <label for="clientName">Customer Name</label>
            <input class="form-control" type="text" id="clientName" ng-model="vm.searchFilters.clientName">
          </div>

          <div class="form-group">
            <label for="serialNumber">Serial Number</label>
            <input class="form-control" type="text" id="serialNumber" ng-model="vm.searchFilters.serialNumber">
          </div>
          <div class="text-right">
            <button type="button" class="btn btn-warning" ng-click="vm.reset()">Reset</button>
            <button type="submit" class="btn btn-success">Search</button>
          </div>
        </form>
      </div>
      <div class="col-xs-12 table-responsive col-md-pull-3 col-md-9">
        <table class="table table-bordered">
          <thead>
          <th
            ng-click="vm.onSortFiltersChanged('salesOrder')">
            Sales Order
            <span class="glyphicon glyphicon-triangle-bottom"
                  ng-class="{reverse: vm.sortFilters.order}"
                  ng-show="vm.sortFilters.sort === 'salesOrder'"></span>
          </th>
          <th
            ng-click="vm.onSortFiltersChanged('date')">
            Date
            <span class="glyphicon glyphicon-triangle-bottom"
                  ng-class="{reverse: vm.sortFilters.order}"
                  ng-show="vm.sortFilters.sort === 'date'"></span>
          </th>
          <th
            ng-click="vm.onSortFiltersChanged('clientName')">
            Customer Name
            <span class="glyphicon glyphicon-triangle-bottom"
                  ng-class="{reverse: vm.sortFilters.order}"
                  ng-show="vm.sortFilters.sort === 'clientName'"></span>
          </th>
          <th class="col-actions" has-role="['admin', 'salesAdmin']">Actions</th>
          </thead>
          <tbody>
          <tr ng-repeat="sale in vm.sales">
            <td>{{sale.salesOrder}}</td>
            <td>{{sale.date | date: 'dd.MM.yyyy'}}</td>
            <td>{{sale.clientName}}</td>
            <td class="col-actions" has-role="['admin', 'salesAdmin']">
              <button type="button"
                      ng-click="vm.openCreateModal(sale, $index)"
                      class="btn btn-primary btn-sm">
                <span class="glyphicon glyphicon-edit"></span>
              </button>
              <button type="button"
                      ng-click="vm.delete(sale, $index)"
                      class="btn btn-danger btn-sm">
                <span class="glyphicon glyphicon-trash"></span>
              </button>
            </td>
          </tr>
          </tbody>
        </table>

        <ul uib-pagination
            total-items="vm.pagination.total"
            ng-model="vm.pagination.page"
            ng-change="vm.loadSales()"
            max-size="6"
            items-per-page="vm.pagination.limit"
            class="pagination-sm pull-left"
            boundary-link-numbers="true"></ul>
      </div>
    </div>
  </div>
</div>
